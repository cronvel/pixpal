(function(t){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=t()}else if(typeof define==="function"&&define.amd){define([],t)}else{var e;if(typeof window!=="undefined"){e=window}else if(typeof global!=="undefined"){e=global}else if(typeof self!=="undefined"){e=self}else{e=this}e.PixPal=t()}})(function(){var n,t,e;return function(){function u(o,s,f){function h(r,t){if(!s[r]){if(!o[r]){var e="function"==typeof require&&require;if(!t&&e)return e(r,!0);if(a)return a(r,!0);var i=new Error("Cannot find module '"+r+"'");throw i.code="MODULE_NOT_FOUND",i}var n=s[r]={exports:{}};o[r][0].call(n.exports,function(t){var e=o[r][1][t];return h(e||t)},n,n.exports,u,o,s,f)}return s[r].exports}for(var a="function"==typeof require&&require,t=0;t<f.length;t++)h(f[t]);return h}return u}()({1:[function(e,r,t){(function(s){(function(){"use strict";const i=e("./Png.js");const t=e("./PortableImage.js");function n(t,e,r,i){this.width=t;this.height=e;this.palette=[];if(Array.isArray(r)){this.setPalette(r)}if(i){if(!(i instanceof s)){throw new Error("Provided pixel buffer is not a Buffer")}if(i.length!==this.width*this.height){throw new Error("Provided pixel buffer mismatch the expected size (should be exactly width * height)")}this.pixels=i}else{this.pixels=new s(t*e)}}r.exports=n;n.Png=i;n.PortableImage=t;n.prototype.setPalette=function(e){this.palette.length=0;for(let t=0;t<e.length;t++){this.setColor(t,e[t])}};const o=255;n.prototype.setColor=function(t,e){if(!e){return}var r=this.palette[t];if(!r){r=this.palette[t]=[]}if(Array.isArray(e)){r[0]=e[0]??0;r[1]=e[1]??0;r[2]=e[2]??0;r[3]=e[3]??255}else if(typeof e==="object"){r[0]=e.r??0;r[1]=e.g??0;r[2]=e.b??0;r[3]=e.a??255}else if(typeof e==="string"&&e[0]==="#"){e=e.slice(1);if(e.length===3){e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]}let t=Number.parseInt(e,16);if(e.length===6){r[0]=t>>16&o;r[1]=t>>8&o;r[2]=t&o;r[3]=255}else if(e.length===8){r[0]=t>>24&o;r[1]=t>>16&o;r[2]=t>>8&o;r[3]=t&o}}};n.prototype.createImageData=function(){var t=new ImageData(this.width,this.height);this.updateImageData(t);return t};n.prototype.updateImageData=function(i){if(i.width!==this.width||i.height!==this.height){throw new Error(".updateImageData(): width and/or height mismatch")}for(let r=0,t=this.width*this.height;r<t;r++){let t=r*4;let e=this.palette[this.pixels[r]];i.data[t]=e[0];i.data[t+1]=e[1];i.data[t+2]=e[2];i.data[t+3]=e[3]}};n.updateFromImageData=function(i,t={}){if(i.width!==this.width||i.height!==this.height){throw new Error(".updateFromImageData(): width and/or height mismatch")}for(let r=0,t=this.width*this.height;r<t;r++){let t=r*4;let e=this.getClosestColor(i.data[iDest],i.data[iDest+1],i.data[iDest+2],i.data[iDest+3]);if(e===-1){this.pixels[r]=0}else{this.pixels[r]=e}}return pixPal};n.prototype.getClosestColor=(t,e,r,i,n="rgb")=>{};n.decodePngBuffer=async(t,e={})=>{var r=await i.decode(t,e);return n.fromPng(r,e)};n.loadPng=async(t,e={})=>{var r=await i.load(t,e);return n.fromPng(r,e)};n.fromPng=(t,e={})=>{if(t.colorType!==i.COLOR_TYPE_INDEXED||t.decodedBytesPerPixel!==1){throw new Error("Unsupported PNG, only supporting indexed color and 8 bits per pixels output")}var r=new n(t.width,t.height,t.palette,t.pixelBuffer);return r};n.prototype.encodePngBuffer=function(t={}){var e=this.toPng(t);return e.encode(t)};n.prototype.savePng=function(t,e={}){var r=this.toPng(e);return r.save(t,e)};n.prototype.downloadPng=function(t,e={}){var r=this.toPng(e);return r.download(t,e)};n.prototype.toPng=function(t={}){var e=i.createEncoder({width:this.width,height:this.height,colorType:i.COLOR_TYPE_INDEXED,palette:this.palette,pixelBuffer:this.pixels});return e}}).call(this)}).call(this,e("buffer").Buffer)},{"./Png.js":2,"./PortableImage.js":3,buffer:8}],2:[function(I,L,t){(function(E,m){(function(){"use strict";const e=I("./PortableImage.js");const s=I("stream-kit/lib/SequentialReadBuffer.js");const o=I("stream-kit/lib/SequentialWriteBuffer.js");const f=I("crc-32");var h=null;var a=null;var i=null;var n=null;var u=null;if(E.browser){h=window.DecompressionStream;a=window.CompressionStream;i=async t=>{var e=await fetch(t);if(!e.ok){throw new Error("Can't retrieve file: '"+t+"', "+e.status+" - "+e.statusText)}var r=await e.bytes();var i=m.from(r);return i};n=()=>{throw new Error("Can't save from browser (use .download() instead)")};u=(t,e)=>{var r=window.document.createElement("a");r.href=window.URL.createObjectURL(new Blob([e],{type:"application/octet-stream"}));r.download=t;r.click()}}else{let t=I;({DecompressionStream:h,CompressionStream:a}=t("stream/web"));let r=t("fs");i=t=>r.promises.readFile(t);n=(t,e)=>r.promises.writeFile(t,e);u=()=>{throw new Error("Can't download from non-browser (use .saveFileAsync() instead)")}}function l(){this.width=-1;this.height=-1;this.bitDepth=-1;this.colorType=-1;this.compressionMethod=-1;this.filterMethod=-1;this.interlaceMethod=-1;this.palette=[];this.backgroundColorIndex=-1;this.idatBuffers=[];this.iendReceived=false;this.bitsPerPixel=-1;this.decodedBytesPerPixel=-1;this.pixelBuffer=null}L.exports=l;l.createEncoder=(t={})=>{var e=new l;e.width=+t.width||0;e.height=+t.height||0;e.bitDepth=+t.bitDepth||0;e.colorType=t.colorType??l.COLOR_TYPE_INDEXED;e.compressionMethod=0;e.filterMethod=0;e.interlaceMethod=0;if(Array.isArray(t.palette)){e.palette=t.palette}if(t.pixelBuffer&&t.pixelBuffer instanceof m){e.pixelBuffer=t.pixelBuffer}if(!e.bitDepth){if(e.colorType===l.COLOR_TYPE_INDEXED){let t=e.palette.length;e.bitDepth=t<=2?1:t<=4?2:t<=16?4:8}else{e.bitDepth=8}}e.computeBitsPerPixel();return e};l.COLOR_TYPE_GRAYSCALE=0;l.COLOR_TYPE_RGB=2;l.COLOR_TYPE_INDEXED=3;l.COLOR_TYPE_GRAYSCALE_ALPHA=4;l.COLOR_TYPE_RGBA=6;const p=12;const r=[137,80,78,71,13,10,26,10];const c=m.from(r);const t=[0,0,0,0,73,69,78,68,174,66,96,130];const d=m.from(t);l.load=async function(t,e={}){var r=await i(t);return l.decode(r,e)};l.loadImage=async function(t,e={}){var r=await i(t);return l.decodeImage(r,e)};l.decode=async function(t,e={}){var r=new l;await r.decode(t,e);return r};l.decodeImage=function(t,e={}){var r=new l;return r.decodeImage(t,e)};l.prototype.toImage=function(){var t={width:this.width,height:this.height,indexed:this.colorType===l.COLOR_TYPE_INDEXED,pixelBuffer:this.pixelBuffer};if(t.indexed){t.palette=this.palette}t.channels=e.RGBA;return new e(t)};l.prototype.decode=async function(t,n={}){var o=new s(t);for(let t=0;t<r.length;t++){if(r[t]!==o.readUInt8()){throw new Error("Not a PNG, it doesn't start with PNG magic numbers")}}this.palette.length=0;this.pixelBuffer=null;while(!o.ended){if(this.iendReceived){throw new Error("Bad PNG, chunk after IEND")}let t=o.readUInt32BE();let i=o.readUtf8(4);console.log("Found chunk: '"+i+"' of size: "+t);if(y[i]){let e=o.readBuffer(t,true);let r=o.readInt32BE();if(n.crc32){let t=f.buf(e,f.bstr(i));if(t!==r){throw new Error("Bad CRC-32 for chunk '"+i+"', expecting: "+r+" but got: "+t)}}y[i].call(this,new s(e),n)}else{o.skip(t+4)}}if(!this.iendReceived){throw new Error("Bad PNG, no IEND chunk received")}await this.generateImageData()};l.prototype.decodeImage=async function(t,e={}){await this.decode(t,e);return this.toImage()};l.prototype.save=async function(t,e={}){var r=await this.encode(e);await n(t,r)};l.prototype.download=async function(t,e={}){var r=await this.encode(e);await u(t,r)};l.prototype.encode=async function(t={}){var e=[];e.push(c);await this.addChunk(e,"IHDR",t);await this.addChunk(e,"PLTE",t);await this.addChunk(e,"tRNS",t);await this.addChunk(e,"bKGD",t);await this.addChunk(e,"IDAT",t);e.push(d);console.log("Chunks:",e);return m.concat(e)};l.prototype.addChunk=async function(t,e,r){if(!g[e]){return}var i=await g[e].call(this,r);if(!i){return}var n=this.generateChunkFromData(e,i);t.push(n)};l.prototype.generateChunkFromData=function(t,e){var r=m.alloc(p+e.length);r.writeInt32BE(e.length);r.write(t,4,4,"latin1");e.copy(r,8);var i=f.buf(e,f.bstr(t));r.writeInt32BE(i,r.length-4);console.log("Generated chunk: '"+t+"' of size: "+e.length+" and CRC-32: "+i);return r};const y={};const g={};y.IHDR=function(t,e){this.width=t.readUInt32BE();this.height=t.readUInt32BE();this.bitDepth=t.readUInt8();this.colorType=t.readUInt8();this.compressionMethod=t.readUInt8();this.filterMethod=t.readUInt8();this.interlaceMethod=t.readUInt8();this.computeBitsPerPixel();console.log("After IHDR:",this)};g.IHDR=function(t){let e=new o(13);e.writeUInt32BE(this.width);e.writeUInt32BE(this.height);e.writeUInt8(this.bitDepth);e.writeUInt8(this.colorType);e.writeUInt8(this.compressionMethod);e.writeUInt8(this.filterMethod);e.writeUInt8(this.interlaceMethod);return e.getBuffer(true)};y.PLTE=function(t,e){if(this.colorType!==l.COLOR_TYPE_INDEXED){throw new Error("Unsupported color type for PLTE: "+this.colorType)}this.palette.length=0;let r=0;while(!t.ended){this.palette[r++]=[t.readUInt8(),t.readUInt8(),t.readUInt8(),255]}console.log("PLTE:",this.palette)};g.PLTE=function(t){if(this.colorType!==l.COLOR_TYPE_INDEXED){return}let r=new o(this.palette.length*3);for(let e=0;e<this.palette.length;e++){let t=this.palette[e];r.writeUInt8(t[0]);r.writeUInt8(t[1]);r.writeUInt8(t[2])}return r.getBuffer(true)};y.tRNS=function(t,e){if(this.colorType!==l.COLOR_TYPE_INDEXED){throw new Error("Unsupported color type for tRNS: "+this.colorType)}let r=0;while(!t.ended&&r<this.palette.length){this.palette[r++][3]=t.readUInt8()}console.log("tRNS:",this.palette)};g.tRNS=function(t){if(this.colorType!==l.COLOR_TYPE_INDEXED||!this.palette.length){return}let e=[];for(let t=0;t<this.palette.length;t++){if(this.palette[t][3]<128){e.push(t)}}if(!e.length){return}return m.from(e)};y.bKGD=function(t,e){if(this.colorType!==l.COLOR_TYPE_INDEXED){throw new Error("Unsupported color type for bKGD: "+this.colorType)}this.backgroundColorIndex=t.readUInt8();console.log("bKGD:",this.backgroundColorIndex)};g.bKGD=function(t){if(this.colorType!==l.COLOR_TYPE_INDEXED||this.backgroundColorIndex<0){return}let e=m.allocUnsafe(1);e.writeUInt8(this.backgroundColorIndex,0);return e};y.IDAT=function(t,e){this.idatBuffers.push(t.buffer);console.log("Raw IDAT:",t.buffer,t.buffer.length)};g.IDAT=async function(t){if(!this.pixelBuffer){return}if(this.colorType!==l.COLOR_TYPE_INDEXED){throw new Error("Unsupported color type for IDAT: "+this.colorType)}if(this.interlaceMethod){throw new Error("Interlace methods are unsupported (IDAT): "+this.interlaceMethod)}console.log("Creating IDAT with bits per pixel / bit depth: "+this.bitsPerPixel+" / "+this.bitDepth);var r=this.width*this.decodedBytesPerPixel;var e=1+Math.ceil(this.width*this.bitsPerPixel/8);var i=new o(this.palette.length*3);for(let e=0;e<this.height;e++){i.writeUInt8(0);if(this.bitsPerPixel>=8){i.writeBuffer(this.pixelBuffer,e*r,(e+1)*r)}else{for(let t=0;t<this.width;t++){i.writeUBits(this.pixelBuffer[e*r+t],this.bitsPerPixel)}}}var n=await v(i.getBuffer(true));console.log("Compressed IDAT:",n,n.length);return n};y.IEND=function(){this.iendReceived=true;console.log("IEND")};g.IEND=function(){return m.allocUnsafe(0)};l.prototype.generateImageData=async function(){if(this.colorType!==l.COLOR_TYPE_INDEXED){throw new Error("Unsupported color type for IDAT: "+this.colorType)}if(this.interlaceMethod){throw new Error("Interlace methods are unsupported (IDAT): "+this.interlaceMethod)}this.pixelBuffer=m.allocUnsafe(this.width*this.height*this.decodedBytesPerPixel);var t=m.concat(this.idatBuffers);var e=await b(t);console.log("Decompressed IDAT:",e,e.length);var r=1+Math.ceil(this.width*this.bitsPerPixel/8);var i=r*this.height;var n=this.width*this.decodedBytesPerPixel;if(i!==e.length){throw new Error("Expecting a decompressed buffer of length of "+i+" but got: "+e.length)}console.log("lineByteLength:",r);for(let t=0;t<this.height;t++){this.decodeLineFilter(e,t*r,(t+1)*r,t>0?(t-1)*r:-1);this.extractLine(e,t*r+1,r-1,t*n)}console.log("pixelBuffer:",this.pixelBuffer,this.pixelBuffer.length)};l.prototype.extractLine=function(t,r,i,n){if(this.bitsPerPixel>=8){t.copy(this.pixelBuffer,n,r,r+i)}else{let e=new s(t.slice(r,r+i));for(let t=0;t<this.width;t++){this.pixelBuffer[n+t]=e.readUBits(this.bitsPerPixel)}}};l.prototype.decodeLineFilter=function(o,s,e,f){var h=o[s];if(h===0){return}console.log("Watch out! FilterType is not 0!");var a=Math.ceil(this.bitsPerPixels/8);for(let n=0,t=e-s;n<t;n++){let t=o[s+n],e=n>0?o[s+n-a]:0,r=f>=0?o[f+n]:0,i=n>0&&f>=0?o[f+n-a]:0;o[s+n]=w[h](t,e,r,i)}};const w=[];w[0]={encode:(t,e,r,i)=>t,decode:(t,e,r,i)=>t};w[1]={encode:(t,e,r,i)=>t-e,decode:(t,e,r,i)=>t+e};w[2]={encode:(t,e,r,i)=>t-r,decode:(t,e,r,i)=>t+r};w[3]={encode:(t,e,r,i)=>t-Math.floor((e+r)/2),decode:(t,e,r,i)=>t+Math.floor((e+r)/2)};w[4]={encode:(t,e,r,i)=>t-B(e,r,i),decode:(t,e,r,i)=>t+B(e,r,i)};function B(t,e,r){var i,n=t+e-r,o=Math.abs(n-t),s=Math.abs(n-e),f=Math.abs(n-r);if(o<=s&&o<=f){i=t}else if(s<=f){i=e}else{i=r}return i}l.prototype.computeBitsPerPixel=function(){switch(this.colorType){case l.COLOR_TYPE_GRAYSCALE:case l.COLOR_TYPE_INDEXED:this.bitsPerPixel=this.bitDepth;break;case l.COLOR_TYPE_RGB:this.bitsPerPixel=this.bitDepth*3;break;case l.COLOR_TYPE_GRAYSCALE_ALPHA:this.bitsPerPixel=this.bitDepth*2;break;case l.COLOR_TYPE_RGBA:this.bitsPerPixel=this.bitDepth*4;break}this.decodedBytesPerPixel=Math.ceil(this.bitsPerPixel/8)};async function b(t){const e=new h("deflate");const r=new Blob([t]);const i=r.stream().pipeThrough(e);const n=[];for await(let t of i){n.push(t)}return m.concat(n)}async function v(t){const e=new a("deflate");const r=new Blob([t]);const i=r.stream().pipeThrough(e);const n=[];for await(let t of i){n.push(t)}return m.concat(n)}}).call(this)}).call(this,I("_process"),I("buffer").Buffer)},{"./PortableImage.js":3,_process:10,buffer:8,"crc-32":4,"stream-kit/lib/SequentialReadBuffer.js":5,"stream-kit/lib/SequentialWriteBuffer.js":6}],3:[function(t,r,e){(function(e){(function(){"use strict";function f(t={}){this.width=t.width;this.height=t.height;this.channels=Array.isArray(t.channels)?t.channels:f.RGBA;this.indexed=t.indexed||Array.isArray(t.palette);this.bytesPerPixel=this.indexed?1:this.channels.length;this.palette=this.indexed?[]:null;this.pixelBuffer=null;if(t.pixelBuffer){if(t.pixelBuffer instanceof e){if(t.pixelBuffer.length!==this.width*this.height*this.bytesPerPixel){throw new Error("Provided pixel Buffer mismatch the expected size (should be exactly width * height * bytesPerPixel)")}this.pixelBuffer=t.pixelBuffer}else if(t.pixelBuffer instanceof Uint8Array){if(t.pixelBuffer.length!==this.width*this.height*this.bytesPerPixel){throw new Error("Provided pixel Uint8Array buffer mismatch the expected size (should be exactly width * height * bytesPerPixel)")}this.pixelBuffer=e.from(t.pixelBuffer)}else{throw new Error("Provided pixel buffer is not a Buffer or a Uint8Array")}}else{this.pixelBuffer=new e(this.width*this.height*this.bytesPerPixel)}if(Array.isArray(t.palette)){this.setPalette(t.palette)}this.channelIndex={};for(let t=0;t<this.channels.length;t++){this.channelIndex[this.channels[t]]=t}this.isRGBCompatible=this.channels.length>=3&&this.channels[0]==="R"&&this.channels[1]==="G"&&this.channels[2]==="B";this.isRGBACompatible=this.channels.length>=4&&this.isRGBCompatible&&this.channels[3]==="A";this.isRGB=this.isRGBCompatible&&this.channels.length===3;this.isRGBA=this.isRGBACompatible&&this.channels.length===4}r.exports=f;f.RGB=["R","G","B"];f.RGBA=["R","G","B","A"];f.prototype.setPalette=function(e){if(!this.indexed){throw new Error("This is not an indexed image")}this.palette.length=0;for(let t=0;t<e.length;t++){this.setPaletteEntry(t,e[t])}};f.prototype.setPaletteEntry=function(t,e){if(this.isRGB||this.isRGBA){return this.setPaletteColor(t,e)}if(!this.indexed){throw new Error("This is not an indexed image")}if(!e){return}var r=this.palette[t];if(!r){r=this.palette[t]=[]}if(Array.isArray(e)){for(let t=0;t<this.channels.length;t++){r[t]=e[t]??0}}else if(typeof e==="object"){for(let t=0;t<this.channels.length;t++){r[t]=e[this.channels[t]]??0}}};const i=255;f.prototype.setPaletteColor=function(t,e){if(!this.indexed){throw new Error("This is not an indexed image")}if(!e){return}var r=this.palette[t];if(!r){r=this.palette[t]=[]}if(Array.isArray(e)){r[0]=e[0]??0;r[1]=e[1]??0;r[2]=e[2]??0;if(this.isRGBA){r[3]=e[3]??255}}else if(typeof e==="object"){r[0]=e.R??e.r??0;r[1]=e.G??e.g??0;r[2]=e.B??e.b??0;if(this.isRGBA){r[3]=e.A??e.a??255}}else if(typeof e==="string"&&e[0]==="#"){e=e.slice(1);if(e.length===3){e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]}let t=Number.parseInt(e,16);if(e.length===6){r[0]=t>>16&i;r[1]=t>>8&i;r[2]=t&i;if(this.isRGBA){r[3]=255}}else if(e.length===8){r[0]=t>>24&i;r[1]=t>>16&i;r[2]=t>>8&i;if(this.isRGBA){r[3]=t&i}}}};f.prototype.getClosestPaletteIndex=n=>{var t=Math.min(this.channels.length,n.length),o=Infinity,s=0;for(let i=0;i<this.palette.length;i++){let r=0;for(let e=0;e<t;e++){let t=this.palette[i][e]-n[e];r+=t*t;if(r<o){o=r;s=i}}}return s};f.RGB_MAPPING=[0,1,2];f.RGBA_MAPPING=[0,1,2,3];f.prototype.copyTo=function(t){let e={buffer:this.pixelBuffer,width:this.width,height:this.height,bytesPerPixel:this.bytesPerPixel,x:0,y:0,endX:this.width,endY:this.height};let r={buffer:t.pixelBuffer,width:t.width,height:t.height,bytesPerPixel:t.bytesPerPixel,x:0,y:0,endX:t.width,endY:t.height,scaleX:1,scaleY:1,channelValues:mapping.length===3?[null,null,null,255]:[],channelMapping:mapping};console.log("### Mapping: ",mapping);if(this.indexed){e.palette=this.palette;f.indexedBlit(e,r)}else{f.blit(e,r)}};f.prototype.createImageData=function(t={}){var e=t.scaleX??t.scale??1,r=t.scaleY??t.scale??1;var i=new ImageData(this.width*e,this.height*r);this.updateImageData(i,t);return i};f.DEFAULT_CHANNEL_VALUES={R:0,G:0,B:0,A:255};f.prototype.getMappingTo=function(t,e=f.DEFAULT_CHANNEL_VALUES){return mapping=t.channels.map(t=>this.channelIndex[t]??e[t]??0)};f.prototype.getMappingToChannels=function(t,e=f.DEFAULT_CHANNEL_VALUES){return mapping=t.map(t=>this.channelIndex[t]??e[t]??0)};f.getMapping=function(r,t,i=f.DEFAULT_CHANNEL_VALUES){return mapping=t.map(t=>{let e=r.indexOf(t);return e>=0?e:i[t]??0})};f.prototype.updateImageData=function(n,t={}){var o=t.mapping,e=t.scaleX??t.scale??1,r=t.scaleY??t.scale??1;if(!o){if(this.isRGBACompatible){o=f.RGBA_MAPPING}else if(this.isRGBCompatible){o=f.RGB_MAPPING}else{throw new Error("Mapping required for image that are not RGB/RGBA compatible")}}let i={buffer:this.pixelBuffer,width:this.width,height:this.height,bytesPerPixel:this.bytesPerPixel,x:0,y:0,endX:this.width,endY:this.height};if(o.length<4){o=[...o];for(let t=o.length;t<4;t++){o[t]=-1}}let s={buffer:n.data,width:n.width,height:n.height,bytesPerPixel:4,x:0,y:0,endX:n.width,endY:n.height,scaleX:e,scaleY:r,channelValues:[0,0,0,255],channelMapping:o};if(this.indexed){i.palette=this.palette;f.indexedBlit(i,s)}else{f.blit(i,s)}return;for(let i=0,t=this.width*this.height;i<t;i++){let t=i*this.bytesPerPixel;let e=i*4;let r=this.pixelBuffer;if(this.indexed){r=this.palette[this.pixelBuffer[t]];t=0}n.data[e]=r[t+o[0]];n.data[e+1]=r[t+o[1]];n.data[e+2]=r[t+o[2]];n.data[e+3]=r[t+o[3]]??255}};f.blit=function(n,o){var e=Math.min(o.endX-o.x,(n.endX-n.x)*o.scaleX),t=Math.min(o.endY-o.y,(n.endY-n.y)*o.scaleY),s=o.channelMapping.length;for(let i=0;i<t;i++){for(let t=0;t<e;t++){let e=((o.y+i)*o.width+(o.x+t))*o.bytesPerPixel;let r=(Math.floor(n.y+i/o.scaleY)*n.width+Math.floor(n.x+t/o.scaleX))*n.bytesPerPixel;for(let t=0;t<s;t++){o.buffer[e+t]=o.channelMapping[t]>=0?n.buffer[r+o.channelMapping[t]]:o.channelValues[t]}}}};f.indexedBlit=function(o,s){var t=Math.min(s.endX-s.x,(o.endX-o.x)*s.scaleX),e=Math.min(s.endY-s.y,(o.endY-o.y)*s.scaleY),f=s.channelMapping.length;for(let n=0;n<e;n++){for(let i=0;i<t;i++){let e=((s.y+n)*s.width+(s.x+i))*s.bytesPerPixel;let t=(Math.floor(o.y+n/s.scaleY)*o.width+Math.floor(o.x+i/s.scaleX))*o.bytesPerPixel;let r=o.palette[o.buffer[t]];for(let t=0;t<f;t++){s.buffer[e+t]=s.channelMapping[t]>=0?r[s.channelMapping[t]]:s.channelValues[t]}}}};f.prototype.updateFromImageData=function(i,n){if(!n){if(this.isRGBACompatible){n=f.RGBA_MAPPING}else if(this.isRGBCompatible){n=f.RGB_MAPPING}else{throw new Error("Mapping required for image that are not RGB/RGBA compatible")}}if(i.width!==this.width||i.height!==this.height){throw new Error(".updateFromImageData(): width and/or height mismatch")}for(let t=0,e=this.width*this.height;t<e;t++){let e=t*this.bytesPerPixel;let r=t*4;if(this.indexed){let t=[];t[e+n[0]]=i[r];t[e+n[1]]=i[r+1];t[e+n[2]]=i[r+2];t[e+n[3]]=i[r+3];this.pixelBuffer[e]=this.getClosestPaletteIndex(t)}this.pixelBuffer[e+n[0]]=i[r];this.pixelBuffer[e+n[1]]=i[r+1];this.pixelBuffer[e+n[2]]=i[r+2];this.pixelBuffer[e+n[3]]=i[r+3]}}}).call(this)}).call(this,t("buffer").Buffer)},{buffer:8}],4:[function(t,e,r){var i;(function(e){if(typeof DO_NOT_EXPORT_CRC==="undefined"){if("object"===typeof r){e(r)}else if("function"===typeof n&&n.amd){n(function(){var t={};e(t);return t})}else{e(i={})}}else{e(i={})}})(function(t){t.version="1.2.2";function e(){var t=0,e=new Array(256);for(var r=0;r!=256;++r){t=r;t=t&1?-306674912^t>>>1:t>>>1;t=t&1?-306674912^t>>>1:t>>>1;t=t&1?-306674912^t>>>1:t>>>1;t=t&1?-306674912^t>>>1:t>>>1;t=t&1?-306674912^t>>>1:t>>>1;t=t&1?-306674912^t>>>1:t>>>1;t=t&1?-306674912^t>>>1:t>>>1;t=t&1?-306674912^t>>>1:t>>>1;e[r]=t}return typeof Int32Array!=="undefined"?new Int32Array(e):e}var f=e();function r(t){var e=0,r=0,i=0,n=typeof Int32Array!=="undefined"?new Int32Array(4096):new Array(4096);for(i=0;i!=256;++i)n[i]=t[i];for(i=0;i!=256;++i){r=t[i];for(e=256+i;e<4096;e+=256)r=n[e]=r>>>8^t[r&255]}var o=[];for(i=1;i!=16;++i)o[i-1]=typeof Int32Array!=="undefined"?n.subarray(i*256,i*256+256):n.slice(i*256,i*256+256);return o}var i=r(f);var o=i[0],s=i[1],h=i[2],a=i[3],u=i[4];var l=i[5],p=i[6],c=i[7],d=i[8],y=i[9];var g=i[10],w=i[11],B=i[12],b=i[13],v=i[14];function n(t,e){var r=e^-1;for(var i=0,n=t.length;i<n;)r=r>>>8^f[(r^t.charCodeAt(i++))&255];return~r}function E(t,e){var r=e^-1,i=t.length-15,n=0;for(;n<i;)r=v[t[n++]^r&255]^b[t[n++]^r>>8&255]^B[t[n++]^r>>16&255]^w[t[n++]^r>>>24]^g[t[n++]]^y[t[n++]]^d[t[n++]]^c[t[n++]]^p[t[n++]]^l[t[n++]]^u[t[n++]]^a[t[n++]]^h[t[n++]]^s[t[n++]]^o[t[n++]]^f[t[n++]];i+=15;while(n<i)r=r>>>8^f[(r^t[n++])&255];return~r}function m(t,e){var r=e^-1;for(var i=0,n=t.length,o=0,s=0;i<n;){o=t.charCodeAt(i++);if(o<128){r=r>>>8^f[(r^o)&255]}else if(o<2048){r=r>>>8^f[(r^(192|o>>6&31))&255];r=r>>>8^f[(r^(128|o&63))&255]}else if(o>=55296&&o<57344){o=(o&1023)+64;s=t.charCodeAt(i++)&1023;r=r>>>8^f[(r^(240|o>>8&7))&255];r=r>>>8^f[(r^(128|o>>2&63))&255];r=r>>>8^f[(r^(128|s>>6&15|(o&3)<<4))&255];r=r>>>8^f[(r^(128|s&63))&255]}else{r=r>>>8^f[(r^(224|o>>12&15))&255];r=r>>>8^f[(r^(128|o>>6&63))&255];r=r>>>8^f[(r^(128|o&63))&255]}}return~r}t.table=f;t.bstr=n;t.buf=E;t.str=m})},{}],5:[function(t,e,r){(function(i){(function(){"use strict";function t(t){this.buffer=t;this.ptr=0;this.currentBitByte=0;this.remainingBits=0}e.exports=t;Object.defineProperties(t.prototype,{ended:{get:function(){return this.ptr>=this.buffer.length}},remainingBytes:{get:function(){return this.buffer.length-this.ptr}}});t.prototype.skip=function(t){this.remainingBits=this.currentBitByte=0;this.ptr+=t};t.prototype.readBuffer=function(t,e=false){this.remainingBits=this.currentBitByte=0;var r;if(e){r=this.buffer.slice(this.ptr,this.ptr+t)}else{r=i.allocUnsafe(t);this.buffer.copy(r,0,this.ptr,this.ptr+t)}this.ptr+=t;return r};t.prototype.readFloat=t.prototype.readFloatBE=function(){this.remainingBits=this.currentBitByte=0;var t=this.buffer.readFloatBE(this.ptr);this.ptr+=4;return t};t.prototype.readFloatLE=function(){this.remainingBits=this.currentBitByte=0;var t=this.buffer.readFloatLE(this.ptr);this.ptr+=4;return t};t.prototype.readNumber=t.prototype.readDouble=t.prototype.readDoubleBE=function(){this.remainingBits=this.currentBitByte=0;var t=this.buffer.readDoubleBE(this.ptr);this.ptr+=8;return t};t.prototype.readDoubleLE=function(){this.remainingBits=this.currentBitByte=0;var t=this.buffer.readDoubleLE(this.ptr);this.ptr+=8;return t};t.prototype.readUInt8=function(){this.remainingBits=this.currentBitByte=0;return this.buffer.readUInt8(this.ptr++)};t.prototype.readUInt16=t.prototype.readUInt16BE=function(){this.remainingBits=this.currentBitByte=0;var t=this.buffer.readUInt16BE(this.ptr);this.ptr+=2;return t};t.prototype.readUInt16LE=function(){this.remainingBits=this.currentBitByte=0;var t=this.buffer.readUInt16LE(this.ptr);this.ptr+=2;return t};t.prototype.readUInt32=t.prototype.readUInt32BE=function(){this.remainingBits=this.currentBitByte=0;var t=this.buffer.readUInt32BE(this.ptr);this.ptr+=4;return t};t.prototype.readUInt32LE=function(){this.remainingBits=this.currentBitByte=0;var t=this.buffer.readUInt32LE(this.ptr);this.ptr+=4;return t};t.prototype.readUInt64=t.prototype.readUInt64BE=function(){this.remainingBits=this.currentBitByte=0;var t=this.buffer.readBigUInt64BE(this.ptr);this.ptr+=8;return t};t.prototype.readUInt64LE=function(){this.remainingBits=this.currentBitByte=0;var t=this.buffer.readBigUInt64LE(this.ptr);this.ptr+=8;return t};t.prototype.readInt8=function(){this.remainingBits=this.currentBitByte=0;return this.buffer.readInt8(this.ptr++)};t.prototype.readInt16=t.prototype.readInt16BE=function(){this.remainingBits=this.currentBitByte=0;var t=this.buffer.readInt16BE(this.ptr);this.ptr+=2;return t};t.prototype.readInt16LE=function(){this.remainingBits=this.currentBitByte=0;var t=this.buffer.readInt16LE(this.ptr);this.ptr+=2;return t};t.prototype.readInt32=t.prototype.readInt32BE=function(){this.remainingBits=this.currentBitByte=0;var t=this.buffer.readInt32BE(this.ptr);this.ptr+=4;return t};t.prototype.readInt32LE=function(){this.remainingBits=this.currentBitByte=0;var t=this.buffer.readInt32LE(this.ptr);this.ptr+=4;return t};t.prototype.readInt64=t.prototype.readInt64BE=function(){this.remainingBits=this.currentBitByte=0;var t=this.buffer.readBigInt64BE(this.ptr);this.ptr+=8;return t};t.prototype.readInt64LE=function(){this.remainingBits=this.currentBitByte=0;var t=this.buffer.readBigInt64LE(this.ptr);this.ptr+=8;return t};t.prototype.readString=function(t,e="latin1"){this.remainingBits=this.currentBitByte=0;var r=this.buffer.toString(e,this.ptr,this.ptr+t);this.ptr+=t;return r};t.prototype.readUtf8=function(t){return this.readString(t,"utf8")};t.prototype.readLps8String=function(t="latin1"){var e=this.readUInt8();return this.readString(e,t)};t.prototype.readLps8Utf8=function(){return this.readLps8String("utf8")};t.prototype.readLps16String=t.prototype.readLps16BEString=function(t="latin1"){var e=this.readUInt16();return this.readString(e,t)};t.prototype.readLps16Utf8=t.prototype.readLps16BEUtf8=function(){return this.readLps16String("utf8")};t.prototype.readLps16LEString=function(t="latin1"){var e=this.readUInt16LE();return this.readString(e,t)};t.prototype.readLps16LEString=function(){return this.readLps16LEString("utf8")};t.prototype.readLps32String=t.prototype.readLps32BEString=function(t="latin1"){var e=this.readUInt32();return this.readString(e,t)};t.prototype.readLps32Utf8=t.prototype.readLps32BEUtf8=function(){return this.readLps32String("utf8")};t.prototype.readLps32LEString=function(t="latin1"){var e=this.readUInt32LE();return this.readString(e,t)};t.prototype.readLps32LEString=function(){return this.readLps32LEString("utf8")};t.prototype.readNullTerminatedString=function(e="latin1"){this.remainingBits=this.currentBitByte=0;var r=this.ptr;for(;r<this.buffer.length;r++){if(this.buffer[r]===0){let t=this.buffer.toString(e,this.ptr,r);this.ptr=r+1;return t}}this.ptr=r;throw new Error("Can't find the null terminator for the string")};t.prototype.readNullTerminatedUtf8=function(){return this.readNullTerminatedString("utf8")};t.prototype.readLps8Buffer=function(){var t=this.readUInt8();return this.readBuffer(t)};t.prototype.readLps16Buffer=t.prototype.readLps16BEBuffer=function(){var t=this.readUInt16();return this.readBuffer(t)};t.prototype.readLps16LEBuffer=function(){var t=this.readUInt16LE();return this.readBuffer(t)};t.prototype.readLps32Buffer=t.prototype.readLps32BEBuffer=function(){var t=this.readUInt32();return this.readBuffer(t)};t.prototype.readLps32LEBuffer=function(){var t=this.readUInt32LE();return this.readBuffer(t)};const n=[0,1,3,7,15,31,63,127,255];t.prototype.readUBits=t.prototype.readUBitsBE=function(e){if(e>8||e<1){throw new Error("SequentialReadBuffer#readUBits() expecting bitCount to be between 1 and 8 but got: "+e)}if(!this.remainingBits){this.currentBitByte=this.buffer.readUInt8(this.ptr);let t=this.currentBitByte>>8-e;this.remainingBits=8-e;this.ptr++;return t}if(e<=this.remainingBits){let t=this.currentBitByte>>this.remainingBits-e&n[e];this.remainingBits-=e;return t}let t=e-this.remainingBits;let r=(this.currentBitByte&n[this.remainingBits])<<t;this.currentBitByte=this.buffer.readUInt8(this.ptr);let i=this.currentBitByte>>8-t;this.remainingBits=8-t;this.ptr++;return r+i}}).call(this)}).call(this,t("buffer").Buffer)},{buffer:8}],6:[function(t,e,r){(function(i){(function(){"use strict";function t(t=1024,e=1.5){this.chunkSize=t;this.chunkSizeMultiplier=e;this.buffer=i.allocUnsafe(this.chunkSize);this.ptr=0;this.chunks=[];this.allChunksSize=0;this.currentBitByte=0;this.remainingBits=0}e.exports=t;t.prototype.size=function(){return this.allChunksSize+this.ptr};t.prototype.getBuffer=function(e=false){if(!this.chunks.length){let t=this.buffer.slice(0,this.ptr);if(e){return t}return i.from(t)}if(!this.ptr){return i.concat(this.chunks)}return i.concat([...this.chunks,this.buffer.slice(0,this.ptr)])};t.prototype.ensureBytes=function(t){this.remainingBits=0;this.currentBitByte=0;if(t<=this.buffer.length-this.ptr){return}this.chunks.push(this.buffer.slice(0,this.ptr));this.allChunksSize+=this.ptr;this.chunkSize=Math.ceil(Math.max(t,this.chunkSize*this.chunkSizeMultiplier));this.buffer=i.allocUnsafe(this.chunkSize);this.ptr=0};t.prototype.writeBuffer=function(t,e=0,r=t.length){var i=r-e;this.ensureBytes(i);t.copy(this.buffer,this.ptr,e,r);this.ptr+=i};t.prototype.writeFloat=t.prototype.writeFloatBE=function(t){this.ensureBytes(4);this.buffer.writeFloatBE(t,this.ptr);this.ptr+=4};t.prototype.writeFloatLE=function(t){this.ensureBytes(4);this.buffer.writeFloatLE(t,this.ptr);this.ptr+=4};t.prototype.writeNumber=t.prototype.writeDouble=t.prototype.writeDoubleBE=function(t){this.ensureBytes(8);this.buffer.writeDoubleBE(t,this.ptr);this.ptr+=8};t.prototype.writeDoubleLE=function(t){this.ensureBytes(8);this.buffer.writeDoubleLE(t,this.ptr);this.ptr+=8};t.prototype.writeUInt8=function(t){this.ensureBytes(1);this.buffer.writeUInt8(t,this.ptr);this.ptr++};t.prototype.writeUInt16=t.prototype.writeUInt16BE=function(t){this.ensureBytes(2);this.buffer.writeUInt16BE(t,this.ptr);this.ptr+=2};t.prototype.writeUInt16LE=function(t){this.ensureBytes(2);this.buffer.writeUInt16LE(t,this.ptr);this.ptr+=2};t.prototype.writeUInt32=t.prototype.writeUInt32BE=function(t){this.ensureBytes(4);this.buffer.writeUInt32BE(t,this.ptr);this.ptr+=4};t.prototype.writeUInt32LE=function(t){this.ensureBytes(4);this.buffer.writeUInt32LE(t,this.ptr);this.ptr+=4};t.prototype.writeUInt64=t.prototype.writeUInt64BE=function(t){this.ensureBytes(8);this.buffer.writeBigUInt64BE(t,this.ptr);this.ptr+=8};t.prototype.writeUInt64LE=function(t){this.ensureBytes(8);this.buffer.writeBigUInt64LE(t,this.ptr);this.ptr+=8};t.prototype.writeInt8=function(t){this.ensureBytes(1);this.buffer.writeInt8(t,this.ptr);this.ptr++};t.prototype.writeInt16=t.prototype.writeInt16BE=function(t){this.ensureBytes(2);this.buffer.writeInt16BE(t,this.ptr);this.ptr+=2};t.prototype.writeInt16LE=function(t){this.ensureBytes(2);this.buffer.writeInt16LE(t,this.ptr);this.ptr+=2};t.prototype.writeInt32=t.prototype.writeInt32BE=function(t){this.ensureBytes(4);this.buffer.writeInt32BE(t,this.ptr);this.ptr+=4};t.prototype.writeInt32LE=function(t){this.ensureBytes(4);this.buffer.writeInt32LE(t,this.ptr);this.ptr+=4};t.prototype.writeInt64=t.prototype.writeInt64BE=function(t){this.ensureBytes(8);this.buffer.writeBigInt64BE(t,this.ptr);this.ptr+=8};t.prototype.writeInt64LE=function(t){this.ensureBytes(8);this.buffer.writeBigInt64LE(t,this.ptr);this.ptr+=8};t.prototype.writeString=function(t,e,r="latin1"){if(e===undefined){e=i.byteLength(t,r)}this.ensureBytes(e);this.buffer.write(t,this.ptr,e,r);this.ptr+=e};t.prototype.writeUtf8=function(t,e){return this.writeString(t,e,"utf8")};t.prototype.writeLps8String=function(t,e,r="latin1"){if(e===undefined){e=i.byteLength(t,r)}if(e>255){throw new RangeError("The string exceed the LPS 8 bits limit")}this.writeUInt8(e);this.writeString(t,e,r)};t.prototype.writeLps8Utf8=function(t,e){return this.writeLps8String(t,e,"utf8")};t.prototype.writeLps16String=t.prototype.writeLps16BEString=function(t,e,r="latin1"){if(e===undefined){e=i.byteLength(t,r)}if(e>65535){throw new RangeError("The string exceed the LPS 16 bits limit")}this.writeUInt16(e);this.writeString(t,e,r)};t.prototype.writeLps16Utf8=t.prototype.writeLps16BEUtf8=function(t,e){return this.writeLps16String(t,e,"utf8")};t.prototype.writeLps16LEString=function(t,e,r="latin1"){if(e===undefined){e=i.byteLength(t,r)}if(e>65535){throw new RangeError("The string exceed the LPS 16 bits limit")}this.writeUInt16LE(e);this.writeString(t,e,r)};t.prototype.writeLps16LEUtf8=function(t,e){return this.writeLps16LEString(t,e,"utf8")};t.prototype.writeLps32String=t.prototype.writeLps32BEString=function(t,e,r="latin1"){if(e===undefined){e=i.byteLength(t,r)}this.writeUInt32(e);this.writeString(t,e,r)};t.prototype.writeLps32Utf8=t.prototype.writeLps32BEUtf8=function(t,e){return this.writeLps32String(t,e,"utf8")};t.prototype.writeLps32LEString=function(t,e,r="latin1"){if(e===undefined){e=i.byteLength(t,r)}this.writeUInt32LE(e);this.writeString(t,e,r)};t.prototype.writeLps32LEUtf8=function(t,e){return this.writeLps32LEString(t,e,"utf8")};t.prototype.writeNullTerminatedString=function(t,e="latin1"){if(t.includes("\0")){throw new Error("The string already contains the NUL character, which is forbidden inside a null-terminated string")}t+="\0";var r=i.byteLength(t,e);this.ensureBytes(r);this.buffer.write(t,this.ptr,r,e);this.ptr+=r};t.prototype.writeNullTerminatedUtf8=function(t){return this.writeNullTerminatedString(t,"utf8")};t.prototype.writeLps8Buffer=function(t){if(t.length>255){throw new RangeError("The buffer exceed the LPS 8 bits limit")}this.writeUInt8(t.length);this.writeBuffer(t)};t.prototype.writeLps16Buffer=t.prototype.writeLps16BEBuffer=function(t){if(t.length>65535){throw new RangeError("The buffer exceed the LPS 16 bits limit")}this.writeUInt16(t.length);this.writeBuffer(t)};t.prototype.writeLps16LEBuffer=function(t){if(t.length>65535){throw new RangeError("The buffer exceed the LPS 16 bits limit")}this.writeUInt16LE(t.length);this.writeBuffer(t)};t.prototype.writeLps32Buffer=t.prototype.writeLps32BEBuffer=function(t){this.writeUInt32(t.length);this.writeBuffer(t)};t.prototype.writeLps32LEBuffer=function(t){this.writeUInt32LE(t.length);this.writeBuffer(t)};const o=[0,1,3,7,15,31,63,127,255];t.prototype.writeUBits=t.prototype.writeUBitsBE=function(t,e){if(e>8||e<1){throw new Error("SequentialWriteBuffer#writeUBits() expecting bitCount to be between 1 and 8 but got: "+e)}t&=o[e];if(!this.remainingBits){this.ensureBytes(1);this.currentBitByte=t<<8-e;this.remainingBits=8-e;this.buffer.writeUInt8(this.currentBitByte,this.ptr);this.ptr++;return}if(e<=this.remainingBits){this.currentBitByte|=t<<this.remainingBits-e;this.remainingBits-=e;this.buffer.writeUInt8(this.currentBitByte,this.ptr-1);return}let r=e-this.remainingBits;let i=t>>r;let n=t&o[r];this.currentBitByte|=i;this.buffer.writeUInt8(this.currentBitByte,this.ptr-1);this.ensureBytes(1);this.currentBitByte=n<<8-r;this.remainingBits=8-r;this.buffer.writeUInt8(this.currentBitByte,this.ptr);this.ptr++}}).call(this)}).call(this,t("buffer").Buffer)},{buffer:8}],7:[function(t,e,r){"use strict";r.byteLength=s;r.toByteArray=f;r.fromByteArray=y;var h=[];var a=[];var u=typeof Uint8Array!=="undefined"?Uint8Array:Array;var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var n=0,o=i.length;n<o;++n){h[n]=i[n];a[i.charCodeAt(n)]=n}a["-".charCodeAt(0)]=62;a["_".charCodeAt(0)]=63;function l(t){var e=t.length;if(e%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}var r=t.indexOf("=");if(r===-1)r=e;var i=r===e?0:4-r%4;return[r,i]}function s(t){var e=l(t);var r=e[0];var i=e[1];return(r+i)*3/4-i}function p(t,e,r){return(e+r)*3/4-r}function f(t){var e;var r=l(t);var i=r[0];var n=r[1];var o=new u(p(t,i,n));var s=0;var f=n>0?i-4:i;var h;for(h=0;h<f;h+=4){e=a[t.charCodeAt(h)]<<18|a[t.charCodeAt(h+1)]<<12|a[t.charCodeAt(h+2)]<<6|a[t.charCodeAt(h+3)];o[s++]=e>>16&255;o[s++]=e>>8&255;o[s++]=e&255}if(n===2){e=a[t.charCodeAt(h)]<<2|a[t.charCodeAt(h+1)]>>4;o[s++]=e&255}if(n===1){e=a[t.charCodeAt(h)]<<10|a[t.charCodeAt(h+1)]<<4|a[t.charCodeAt(h+2)]>>2;o[s++]=e>>8&255;o[s++]=e&255}return o}function c(t){return h[t>>18&63]+h[t>>12&63]+h[t>>6&63]+h[t&63]}function d(t,e,r){var i;var n=[];for(var o=e;o<r;o+=3){i=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(t[o+2]&255);n.push(c(i))}return n.join("")}function y(t){var e;var r=t.length;var i=r%3;var n=[];var o=16383;for(var s=0,f=r-i;s<f;s+=o){n.push(d(t,s,s+o>f?f:s+o))}if(i===1){e=t[r-1];n.push(h[e>>2]+h[e<<4&63]+"==")}else if(i===2){e=(t[r-2]<<8)+t[r-1];n.push(h[e>>10]+h[e>>4&63]+h[e<<2&63]+"=")}return n.join("")}},{}],8:[function(J,t,Z){(function(t){(function(){"use strict";var i=J("base64-js");var o=J("ieee754");Z.Buffer=p;Z.SlowBuffer=e;Z.INSPECT_MAX_BYTES=50;var r=2147483647;Z.kMaxLength=r;p.TYPED_ARRAY_SUPPORT=t();if(!p.TYPED_ARRAY_SUPPORT&&typeof console!=="undefined"&&typeof console.error==="function"){console.error("This browser lacks typed array (Uint8Array) support which is required by "+"`buffer` v5.x. Use `buffer` v4.x if you require old browser support.")}function t(){try{var t=new Uint8Array(1);t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return t.foo()===42}catch(t){return false}}Object.defineProperty(p.prototype,"parent",{enumerable:true,get:function(){if(!p.isBuffer(this))return undefined;return this.buffer}});Object.defineProperty(p.prototype,"offset",{enumerable:true,get:function(){if(!p.isBuffer(this))return undefined;return this.byteOffset}});function s(t){if(t>r){throw new RangeError('The value "'+t+'" is invalid for option "size"')}var e=new Uint8Array(t);e.__proto__=p.prototype;return e}function p(t,e,r){if(typeof t==="number"){if(typeof e==="string"){throw new TypeError('The "string" argument must be of type string. Received type number')}return a(t)}return n(t,e,r)}if(typeof Symbol!=="undefined"&&Symbol.species!=null&&p[Symbol.species]===p){Object.defineProperty(p,Symbol.species,{value:null,configurable:true,enumerable:false,writable:false})}p.poolSize=8192;function n(t,e,r){if(typeof t==="string"){return u(t,e)}if(ArrayBuffer.isView(t)){return l(t)}if(t==null){throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, "+"or Array-like Object. Received type "+typeof t)}if(W(t,ArrayBuffer)||t&&W(t.buffer,ArrayBuffer)){return c(t,e,r)}if(typeof t==="number"){throw new TypeError('The "value" argument must not be of type number. Received type number')}var i=t.valueOf&&t.valueOf();if(i!=null&&i!==t){return p.from(i,e,r)}var n=d(t);if(n)return n;if(typeof Symbol!=="undefined"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]==="function"){return p.from(t[Symbol.toPrimitive]("string"),e,r)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, "+"or Array-like Object. Received type "+typeof t)}p.from=function(t,e,r){return n(t,e,r)};p.prototype.__proto__=Uint8Array.prototype;p.__proto__=Uint8Array;function f(t){if(typeof t!=="number"){throw new TypeError('"size" argument must be of type number')}else if(t<0){throw new RangeError('The value "'+t+'" is invalid for option "size"')}}function h(t,e,r){f(t);if(t<=0){return s(t)}if(e!==undefined){return typeof r==="string"?s(t).fill(e,r):s(t).fill(e)}return s(t)}p.alloc=function(t,e,r){return h(t,e,r)};function a(t){f(t);return s(t<0?0:y(t)|0)}p.allocUnsafe=function(t){return a(t)};p.allocUnsafeSlow=function(t){return a(t)};function u(t,e){if(typeof e!=="string"||e===""){e="utf8"}if(!p.isEncoding(e)){throw new TypeError("Unknown encoding: "+e)}var r=g(t,e)|0;var i=s(r);var n=i.write(t,e);if(n!==r){i=i.slice(0,n)}return i}function l(t){var e=t.length<0?0:y(t.length)|0;var r=s(e);for(var i=0;i<e;i+=1){r[i]=t[i]&255}return r}function c(t,e,r){if(e<0||t.byteLength<e){throw new RangeError('"offset" is outside of buffer bounds')}if(t.byteLength<e+(r||0)){throw new RangeError('"length" is outside of buffer bounds')}var i;if(e===undefined&&r===undefined){i=new Uint8Array(t)}else if(r===undefined){i=new Uint8Array(t,e)}else{i=new Uint8Array(t,e,r)}i.__proto__=p.prototype;return i}function d(t){if(p.isBuffer(t)){var e=y(t.length)|0;var r=s(e);if(r.length===0){return r}t.copy(r,0,0,e);return r}if(t.length!==undefined){if(typeof t.length!=="number"||K(t.length)){return s(0)}return l(t)}if(t.type==="Buffer"&&Array.isArray(t.data)){return l(t.data)}}function y(t){if(t>=r){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+r.toString(16)+" bytes")}return t|0}function e(t){if(+t!=t){t=0}return p.alloc(+t)}p.isBuffer=function t(e){return e!=null&&e._isBuffer===true&&e!==p.prototype};p.compare=function t(e,r){if(W(e,Uint8Array))e=p.from(e,e.offset,e.byteLength);if(W(r,Uint8Array))r=p.from(r,r.offset,r.byteLength);if(!p.isBuffer(e)||!p.isBuffer(r)){throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array')}if(e===r)return 0;var i=e.length;var n=r.length;for(var o=0,s=Math.min(i,n);o<s;++o){if(e[o]!==r[o]){i=e[o];n=r[o];break}}if(i<n)return-1;if(n<i)return 1;return 0};p.isEncoding=function t(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};p.concat=function t(e,r){if(!Array.isArray(e)){throw new TypeError('"list" argument must be an Array of Buffers')}if(e.length===0){return p.alloc(0)}var i;if(r===undefined){r=0;for(i=0;i<e.length;++i){r+=e[i].length}}var n=p.allocUnsafe(r);var o=0;for(i=0;i<e.length;++i){var s=e[i];if(W(s,Uint8Array)){s=p.from(s)}if(!p.isBuffer(s)){throw new TypeError('"list" argument must be an Array of Buffers')}s.copy(n,o);o+=s.length}return n};function g(t,e){if(p.isBuffer(t)){return t.length}if(ArrayBuffer.isView(t)||W(t,ArrayBuffer)){return t.byteLength}if(typeof t!=="string"){throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. '+"Received type "+typeof t)}var r=t.length;var i=arguments.length>2&&arguments[2]===true;if(!i&&r===0)return 0;var n=false;for(;;){switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return j(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return H(t).length;default:if(n){return i?-1:j(t).length}e=(""+e).toLowerCase();n=true}}}p.byteLength=g;function w(t,e,r){var i=false;if(e===undefined||e<0){e=0}if(e>this.length){return""}if(r===undefined||r>this.length){r=this.length}if(r<=0){return""}r>>>=0;e>>>=0;if(r<=e){return""}if(!t)t="utf8";while(true){switch(t){case"hex":return D(this,e,r);case"utf8":case"utf-8":return A(this,e,r);case"ascii":return C(this,e,r);case"latin1":case"binary":return S(this,e,r);case"base64":return U(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,e,r);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase();i=true}}}p.prototype._isBuffer=true;function B(t,e,r){var i=t[e];t[e]=t[r];t[r]=i}p.prototype.swap16=function t(){var e=this.length;if(e%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits")}for(var r=0;r<e;r+=2){B(this,r,r+1)}return this};p.prototype.swap32=function t(){var e=this.length;if(e%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits")}for(var r=0;r<e;r+=4){B(this,r,r+3);B(this,r+1,r+2)}return this};p.prototype.swap64=function t(){var e=this.length;if(e%8!==0){throw new RangeError("Buffer size must be a multiple of 64-bits")}for(var r=0;r<e;r+=8){B(this,r,r+7);B(this,r+1,r+6);B(this,r+2,r+5);B(this,r+3,r+4)}return this};p.prototype.toString=function t(){var e=this.length;if(e===0)return"";if(arguments.length===0)return A(this,0,e);return w.apply(this,arguments)};p.prototype.toLocaleString=p.prototype.toString;p.prototype.equals=function t(e){if(!p.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(this===e)return true;return p.compare(this,e)===0};p.prototype.inspect=function t(){var e="";var r=Z.INSPECT_MAX_BYTES;e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim();if(this.length>r)e+=" ... ";return"<Buffer "+e+">"};p.prototype.compare=function t(e,r,i,n,o){if(W(e,Uint8Array)){e=p.from(e,e.offset,e.byteLength)}if(!p.isBuffer(e)){throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. '+"Received type "+typeof e)}if(r===undefined){r=0}if(i===undefined){i=e?e.length:0}if(n===undefined){n=0}if(o===undefined){o=this.length}if(r<0||i>e.length||n<0||o>this.length){throw new RangeError("out of range index")}if(n>=o&&r>=i){return 0}if(n>=o){return-1}if(r>=i){return 1}r>>>=0;i>>>=0;n>>>=0;o>>>=0;if(this===e)return 0;var s=o-n;var f=i-r;var h=Math.min(s,f);var a=this.slice(n,o);var u=e.slice(r,i);for(var l=0;l<h;++l){if(a[l]!==u[l]){s=a[l];f=u[l];break}}if(s<f)return-1;if(f<s)return 1;return 0};function b(t,e,r,i,n){if(t.length===0)return-1;if(typeof r==="string"){i=r;r=0}else if(r>2147483647){r=2147483647}else if(r<-2147483648){r=-2147483648}r=+r;if(K(r)){r=n?0:t.length-1}if(r<0)r=t.length+r;if(r>=t.length){if(n)return-1;else r=t.length-1}else if(r<0){if(n)r=0;else return-1}if(typeof e==="string"){e=p.from(e,i)}if(p.isBuffer(e)){if(e.length===0){return-1}return v(t,e,r,i,n)}else if(typeof e==="number"){e=e&255;if(typeof Uint8Array.prototype.indexOf==="function"){if(n){return Uint8Array.prototype.indexOf.call(t,e,r)}else{return Uint8Array.prototype.lastIndexOf.call(t,e,r)}}return v(t,[e],r,i,n)}throw new TypeError("val must be string, number or Buffer")}function v(t,e,r,i,n){var o=1;var s=t.length;var f=e.length;if(i!==undefined){i=String(i).toLowerCase();if(i==="ucs2"||i==="ucs-2"||i==="utf16le"||i==="utf-16le"){if(t.length<2||e.length<2){return-1}o=2;s/=2;f/=2;r/=2}}function h(t,e){if(o===1){return t[e]}else{return t.readUInt16BE(e*o)}}var a;if(n){var u=-1;for(a=r;a<s;a++){if(h(t,a)===h(e,u===-1?0:a-u)){if(u===-1)u=a;if(a-u+1===f)return u*o}else{if(u!==-1)a-=a-u;u=-1}}}else{if(r+f>s)r=s-f;for(a=r;a>=0;a--){var l=true;for(var p=0;p<f;p++){if(h(t,a+p)!==h(e,p)){l=false;break}}if(l)return a}}return-1}p.prototype.includes=function t(e,r,i){return this.indexOf(e,r,i)!==-1};p.prototype.indexOf=function t(e,r,i){return b(this,e,r,i,true)};p.prototype.lastIndexOf=function t(e,r,i){return b(this,e,r,i,false)};function E(t,e,r,i){r=Number(r)||0;var n=t.length-r;if(!i){i=n}else{i=Number(i);if(i>n){i=n}}var o=e.length;if(i>o/2){i=o/2}for(var s=0;s<i;++s){var f=parseInt(e.substr(s*2,2),16);if(K(f))return s;t[r+s]=f}return s}function m(t,e,r,i){return V(j(e,t.length-r),t,r,i)}function I(t,e,r,i){return V(z(e),t,r,i)}function L(t,e,r,i){return I(t,e,r,i)}function x(t,e,r,i){return V(H(e),t,r,i)}function P(t,e,r,i){return V(q(e,t.length-r),t,r,i)}p.prototype.write=function t(e,r,i,n){if(r===undefined){n="utf8";i=this.length;r=0}else if(i===undefined&&typeof r==="string"){n=r;i=this.length;r=0}else if(isFinite(r)){r=r>>>0;if(isFinite(i)){i=i>>>0;if(n===undefined)n="utf8"}else{n=i;i=undefined}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported")}var o=this.length-r;if(i===undefined||i>o)i=o;if(e.length>0&&(i<0||r<0)||r>this.length){throw new RangeError("Attempt to write outside buffer bounds")}if(!n)n="utf8";var s=false;for(;;){switch(n){case"hex":return E(this,e,r,i);case"utf8":case"utf-8":return m(this,e,r,i);case"ascii":return I(this,e,r,i);case"latin1":case"binary":return L(this,e,r,i);case"base64":return x(this,e,r,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,r,i);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase();s=true}}};p.prototype.toJSON=function t(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function U(t,e,r){if(e===0&&r===t.length){return i.fromByteArray(t)}else{return i.fromByteArray(t.slice(e,r))}}function A(t,e,r){r=Math.min(t.length,r);var i=[];var n=e;while(n<r){var o=t[n];var s=null;var f=o>239?4:o>223?3:o>191?2:1;if(n+f<=r){var h,a,u,l;switch(f){case 1:if(o<128){s=o}break;case 2:h=t[n+1];if((h&192)===128){l=(o&31)<<6|h&63;if(l>127){s=l}}break;case 3:h=t[n+1];a=t[n+2];if((h&192)===128&&(a&192)===128){l=(o&15)<<12|(h&63)<<6|a&63;if(l>2047&&(l<55296||l>57343)){s=l}}break;case 4:h=t[n+1];a=t[n+2];u=t[n+3];if((h&192)===128&&(a&192)===128&&(u&192)===128){l=(o&15)<<18|(h&63)<<12|(a&63)<<6|u&63;if(l>65535&&l<1114112){s=l}}}}if(s===null){s=65533;f=1}else if(s>65535){s-=65536;i.push(s>>>10&1023|55296);s=56320|s&1023}i.push(s);n+=f}return R(i)}var T=4096;function R(t){var e=t.length;if(e<=T){return String.fromCharCode.apply(String,t)}var r="";var i=0;while(i<e){r+=String.fromCharCode.apply(String,t.slice(i,i+=T))}return r}function C(t,e,r){var i="";r=Math.min(t.length,r);for(var n=e;n<r;++n){i+=String.fromCharCode(t[n]&127)}return i}function S(t,e,r){var i="";r=Math.min(t.length,r);for(var n=e;n<r;++n){i+=String.fromCharCode(t[n])}return i}function D(t,e,r){var i=t.length;if(!e||e<0)e=0;if(!r||r<0||r>i)r=i;var n="";for(var o=e;o<r;++o){n+=X(t[o])}return n}function _(t,e,r){var i=t.slice(e,r);var n="";for(var o=0;o<i.length;o+=2){n+=String.fromCharCode(i[o]+i[o+1]*256)}return n}p.prototype.slice=function t(e,r){var i=this.length;e=~~e;r=r===undefined?i:~~r;if(e<0){e+=i;if(e<0)e=0}else if(e>i){e=i}if(r<0){r+=i;if(r<0)r=0}else if(r>i){r=i}if(r<e)r=e;var n=this.subarray(e,r);n.__proto__=p.prototype;return n};function M(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}p.prototype.readUIntLE=function t(e,r,i){e=e>>>0;r=r>>>0;if(!i)M(e,r,this.length);var n=this[e];var o=1;var s=0;while(++s<r&&(o*=256)){n+=this[e+s]*o}return n};p.prototype.readUIntBE=function t(e,r,i){e=e>>>0;r=r>>>0;if(!i){M(e,r,this.length)}var n=this[e+--r];var o=1;while(r>0&&(o*=256)){n+=this[e+--r]*o}return n};p.prototype.readUInt8=function t(e,r){e=e>>>0;if(!r)M(e,1,this.length);return this[e]};p.prototype.readUInt16LE=function t(e,r){e=e>>>0;if(!r)M(e,2,this.length);return this[e]|this[e+1]<<8};p.prototype.readUInt16BE=function t(e,r){e=e>>>0;if(!r)M(e,2,this.length);return this[e]<<8|this[e+1]};p.prototype.readUInt32LE=function t(e,r){e=e>>>0;if(!r)M(e,4,this.length);return(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};p.prototype.readUInt32BE=function t(e,r){e=e>>>0;if(!r)M(e,4,this.length);return this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};p.prototype.readIntLE=function t(e,r,i){e=e>>>0;r=r>>>0;if(!i)M(e,r,this.length);var n=this[e];var o=1;var s=0;while(++s<r&&(o*=256)){n+=this[e+s]*o}o*=128;if(n>=o)n-=Math.pow(2,8*r);return n};p.prototype.readIntBE=function t(e,r,i){e=e>>>0;r=r>>>0;if(!i)M(e,r,this.length);var n=r;var o=1;var s=this[e+--n];while(n>0&&(o*=256)){s+=this[e+--n]*o}o*=128;if(s>=o)s-=Math.pow(2,8*r);return s};p.prototype.readInt8=function t(e,r){e=e>>>0;if(!r)M(e,1,this.length);if(!(this[e]&128))return this[e];return(255-this[e]+1)*-1};p.prototype.readInt16LE=function t(e,r){e=e>>>0;if(!r)M(e,2,this.length);var i=this[e]|this[e+1]<<8;return i&32768?i|4294901760:i};p.prototype.readInt16BE=function t(e,r){e=e>>>0;if(!r)M(e,2,this.length);var i=this[e+1]|this[e]<<8;return i&32768?i|4294901760:i};p.prototype.readInt32LE=function t(e,r){e=e>>>0;if(!r)M(e,4,this.length);return this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};p.prototype.readInt32BE=function t(e,r){e=e>>>0;if(!r)M(e,4,this.length);return this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};p.prototype.readFloatLE=function t(e,r){e=e>>>0;if(!r)M(e,4,this.length);return o.read(this,e,true,23,4)};p.prototype.readFloatBE=function t(e,r){e=e>>>0;if(!r)M(e,4,this.length);return o.read(this,e,false,23,4)};p.prototype.readDoubleLE=function t(e,r){e=e>>>0;if(!r)M(e,8,this.length);return o.read(this,e,true,52,8)};p.prototype.readDoubleBE=function t(e,r){e=e>>>0;if(!r)M(e,8,this.length);return o.read(this,e,false,52,8)};function O(t,e,r,i,n,o){if(!p.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<o)throw new RangeError('"value" argument is out of bounds');if(r+i>t.length)throw new RangeError("Index out of range")}p.prototype.writeUIntLE=function t(e,r,i,n){e=+e;r=r>>>0;i=i>>>0;if(!n){var o=Math.pow(2,8*i)-1;O(this,e,r,i,o,0)}var s=1;var f=0;this[r]=e&255;while(++f<i&&(s*=256)){this[r+f]=e/s&255}return r+i};p.prototype.writeUIntBE=function t(e,r,i,n){e=+e;r=r>>>0;i=i>>>0;if(!n){var o=Math.pow(2,8*i)-1;O(this,e,r,i,o,0)}var s=i-1;var f=1;this[r+s]=e&255;while(--s>=0&&(f*=256)){this[r+s]=e/f&255}return r+i};p.prototype.writeUInt8=function t(e,r,i){e=+e;r=r>>>0;if(!i)O(this,e,r,1,255,0);this[r]=e&255;return r+1};p.prototype.writeUInt16LE=function t(e,r,i){e=+e;r=r>>>0;if(!i)O(this,e,r,2,65535,0);this[r]=e&255;this[r+1]=e>>>8;return r+2};p.prototype.writeUInt16BE=function t(e,r,i){e=+e;r=r>>>0;if(!i)O(this,e,r,2,65535,0);this[r]=e>>>8;this[r+1]=e&255;return r+2};p.prototype.writeUInt32LE=function t(e,r,i){e=+e;r=r>>>0;if(!i)O(this,e,r,4,4294967295,0);this[r+3]=e>>>24;this[r+2]=e>>>16;this[r+1]=e>>>8;this[r]=e&255;return r+4};p.prototype.writeUInt32BE=function t(e,r,i){e=+e;r=r>>>0;if(!i)O(this,e,r,4,4294967295,0);this[r]=e>>>24;this[r+1]=e>>>16;this[r+2]=e>>>8;this[r+3]=e&255;return r+4};p.prototype.writeIntLE=function t(e,r,i,n){e=+e;r=r>>>0;if(!n){var o=Math.pow(2,8*i-1);O(this,e,r,i,o-1,-o)}var s=0;var f=1;var h=0;this[r]=e&255;while(++s<i&&(f*=256)){if(e<0&&h===0&&this[r+s-1]!==0){h=1}this[r+s]=(e/f>>0)-h&255}return r+i};p.prototype.writeIntBE=function t(e,r,i,n){e=+e;r=r>>>0;if(!n){var o=Math.pow(2,8*i-1);O(this,e,r,i,o-1,-o)}var s=i-1;var f=1;var h=0;this[r+s]=e&255;while(--s>=0&&(f*=256)){if(e<0&&h===0&&this[r+s+1]!==0){h=1}this[r+s]=(e/f>>0)-h&255}return r+i};p.prototype.writeInt8=function t(e,r,i){e=+e;r=r>>>0;if(!i)O(this,e,r,1,127,-128);if(e<0)e=255+e+1;this[r]=e&255;return r+1};p.prototype.writeInt16LE=function t(e,r,i){e=+e;r=r>>>0;if(!i)O(this,e,r,2,32767,-32768);this[r]=e&255;this[r+1]=e>>>8;return r+2};p.prototype.writeInt16BE=function t(e,r,i){e=+e;r=r>>>0;if(!i)O(this,e,r,2,32767,-32768);this[r]=e>>>8;this[r+1]=e&255;return r+2};p.prototype.writeInt32LE=function t(e,r,i){e=+e;r=r>>>0;if(!i)O(this,e,r,4,2147483647,-2147483648);this[r]=e&255;this[r+1]=e>>>8;this[r+2]=e>>>16;this[r+3]=e>>>24;return r+4};p.prototype.writeInt32BE=function t(e,r,i){e=+e;r=r>>>0;if(!i)O(this,e,r,4,2147483647,-2147483648);if(e<0)e=4294967295+e+1;this[r]=e>>>24;this[r+1]=e>>>16;this[r+2]=e>>>8;this[r+3]=e&255;return r+4};function N(t,e,r,i,n,o){if(r+i>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function k(t,e,r,i,n){e=+e;r=r>>>0;if(!n){N(t,e,r,4,34028234663852886e22,-34028234663852886e22)}o.write(t,e,r,i,23,4);return r+4}p.prototype.writeFloatLE=function t(e,r,i){return k(this,e,r,true,i)};p.prototype.writeFloatBE=function t(e,r,i){return k(this,e,r,false,i)};function G(t,e,r,i,n){e=+e;r=r>>>0;if(!n){N(t,e,r,8,17976931348623157e292,-17976931348623157e292)}o.write(t,e,r,i,52,8);return r+8}p.prototype.writeDoubleLE=function t(e,r,i){return G(this,e,r,true,i)};p.prototype.writeDoubleBE=function t(e,r,i){return G(this,e,r,false,i)};p.prototype.copy=function t(e,r,i,n){if(!p.isBuffer(e))throw new TypeError("argument should be a Buffer");if(!i)i=0;if(!n&&n!==0)n=this.length;if(r>=e.length)r=e.length;if(!r)r=0;if(n>0&&n<i)n=i;if(n===i)return 0;if(e.length===0||this.length===0)return 0;if(r<0){throw new RangeError("targetStart out of bounds")}if(i<0||i>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");if(n>this.length)n=this.length;if(e.length-r<n-i){n=e.length-r+i}var o=n-i;if(this===e&&typeof Uint8Array.prototype.copyWithin==="function"){this.copyWithin(r,i,n)}else if(this===e&&i<r&&r<n){for(var s=o-1;s>=0;--s){e[s+r]=this[s+i]}}else{Uint8Array.prototype.set.call(e,this.subarray(i,n),r)}return o};p.prototype.fill=function t(e,r,i,n){if(typeof e==="string"){if(typeof r==="string"){n=r;r=0;i=this.length}else if(typeof i==="string"){n=i;i=this.length}if(n!==undefined&&typeof n!=="string"){throw new TypeError("encoding must be a string")}if(typeof n==="string"&&!p.isEncoding(n)){throw new TypeError("Unknown encoding: "+n)}if(e.length===1){var o=e.charCodeAt(0);if(n==="utf8"&&o<128||n==="latin1"){e=o}}}else if(typeof e==="number"){e=e&255}if(r<0||this.length<r||this.length<i){throw new RangeError("Out of range index")}if(i<=r){return this}r=r>>>0;i=i===undefined?this.length:i>>>0;if(!e)e=0;var s;if(typeof e==="number"){for(s=r;s<i;++s){this[s]=e}}else{var f=p.isBuffer(e)?e:p.from(e,n);var h=f.length;if(h===0){throw new TypeError('The value "'+e+'" is invalid for argument "value"')}for(s=0;s<i-r;++s){this[s+r]=f[s%h]}}return this};var Y=/[^+/0-9A-Za-z-_]/g;function F(t){t=t.split("=")[0];t=t.trim().replace(Y,"");if(t.length<2)return"";while(t.length%4!==0){t=t+"="}return t}function X(t){if(t<16)return"0"+t.toString(16);return t.toString(16)}function j(t,e){e=e||Infinity;var r;var i=t.length;var n=null;var o=[];for(var s=0;s<i;++s){r=t.charCodeAt(s);if(r>55295&&r<57344){if(!n){if(r>56319){if((e-=3)>-1)o.push(239,191,189);continue}else if(s+1===i){if((e-=3)>-1)o.push(239,191,189);continue}n=r;continue}if(r<56320){if((e-=3)>-1)o.push(239,191,189);n=r;continue}r=(n-55296<<10|r-56320)+65536}else if(n){if((e-=3)>-1)o.push(239,191,189)}n=null;if(r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else{throw new Error("Invalid code point")}}return o}function z(t){var e=[];for(var r=0;r<t.length;++r){e.push(t.charCodeAt(r)&255)}return e}function q(t,e){var r,i,n;var o=[];for(var s=0;s<t.length;++s){if((e-=2)<0)break;r=t.charCodeAt(s);i=r>>8;n=r%256;o.push(n);o.push(i)}return o}function H(t){return i.toByteArray(F(t))}function V(t,e,r,i){for(var n=0;n<i;++n){if(n+r>=e.length||n>=t.length)break;e[n+r]=t[n]}return n}function W(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function K(t){return t!==t}}).call(this)}).call(this,J("buffer").Buffer)},{"base64-js":7,buffer:8,ieee754:9}],9:[function(t,e,r){r.read=function(t,e,r,i,n){var o,s;var f=n*8-i-1;var h=(1<<f)-1;var a=h>>1;var u=-7;var l=r?n-1:0;var p=r?-1:1;var c=t[e+l];l+=p;o=c&(1<<-u)-1;c>>=-u;u+=f;for(;u>0;o=o*256+t[e+l],l+=p,u-=8){}s=o&(1<<-u)-1;o>>=-u;u+=i;for(;u>0;s=s*256+t[e+l],l+=p,u-=8){}if(o===0){o=1-a}else if(o===h){return s?NaN:(c?-1:1)*Infinity}else{s=s+Math.pow(2,i);o=o-a}return(c?-1:1)*s*Math.pow(2,o-i)};r.write=function(t,e,r,i,n,o){var s,f,h;var a=o*8-n-1;var u=(1<<a)-1;var l=u>>1;var p=n===23?Math.pow(2,-24)-Math.pow(2,-77):0;var c=i?0:o-1;var d=i?1:-1;var y=e<0||e===0&&1/e<0?1:0;e=Math.abs(e);if(isNaN(e)||e===Infinity){f=isNaN(e)?1:0;s=u}else{s=Math.floor(Math.log(e)/Math.LN2);if(e*(h=Math.pow(2,-s))<1){s--;h*=2}if(s+l>=1){e+=p/h}else{e+=p*Math.pow(2,1-l)}if(e*h>=2){s++;h/=2}if(s+l>=u){f=0;s=u}else if(s+l>=1){f=(e*h-1)*Math.pow(2,n);s=s+l}else{f=e*Math.pow(2,l-1)*Math.pow(2,n);s=0}}for(;n>=8;t[r+c]=f&255,c+=d,f/=256,n-=8){}s=s<<n|f;a+=n;for(;a>0;t[r+c]=s&255,c+=d,s/=256,a-=8){}t[r+c-d]|=y*128}},{}],10:[function(t,e,r){var i=e.exports={};var n;var o;function s(){throw new Error("setTimeout has not been defined")}function f(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){n=setTimeout}else{n=s}}catch(t){n=s}try{if(typeof clearTimeout==="function"){o=clearTimeout}else{o=f}}catch(t){o=f}})();function h(e){if(n===setTimeout){return setTimeout(e,0)}if((n===s||!n)&&setTimeout){n=setTimeout;return setTimeout(e,0)}try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}function a(e){if(o===clearTimeout){return clearTimeout(e)}if((o===f||!o)&&clearTimeout){o=clearTimeout;return clearTimeout(e)}try{return o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}var u=[];var l=false;var p;var c=-1;function d(){if(!l||!p){return}l=false;if(p.length){u=p.concat(u)}else{c=-1}if(u.length){y()}}function y(){if(l){return}var t=h(d);l=true;var e=u.length;while(e){p=u;u=[];while(++c<e){if(p){p[c].run()}}c=-1;e=u.length}p=null;l=false;a(t)}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1){for(var r=1;r<arguments.length;r++){e[r-1]=arguments[r]}}u.push(new g(t,e));if(u.length===1&&!l){h(y)}};function g(t,e){this.fun=t;this.array=e}g.prototype.run=function(){this.fun.apply(null,this.array)};i.title="browser";i.browser=true;i.env={};i.argv=[];i.version="";i.versions={};function w(){}i.on=w;i.addListener=w;i.once=w;i.off=w;i.removeListener=w;i.removeAllListeners=w;i.emit=w;i.prependListener=w;i.prependOnceListener=w;i.listeners=function(t){return[]};i.binding=function(t){throw new Error("process.binding is not supported")};i.cwd=function(){return"/"};i.chdir=function(t){throw new Error("process.chdir is not supported")};i.umask=function(){return 0}},{}]},{},[1])(1)});